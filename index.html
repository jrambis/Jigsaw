<!DOCTYPE html>
<!--
    Multiplayer Jigsaw Puzzle - v2.0.2
    Multiuser Mode: Shared puzzles, real-time sync
    Deployed via GitHub Actions
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="version" content="2.0.2">
    <title>Multiplayer Jigsaw Puzzle</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <div id="controls">
            <div class="control-group" id="pieceCountGroup">
                <label for="pieceCount">Pieces:</label>
                <select id="pieceCount">
                    <option value="4">4 pieces (debug)</option>
                    <option value="25">25 pieces</option>
                    <option value="50">50 pieces</option>
                    <option value="100">100 pieces</option>
                    <option value="200" selected>200 pieces</option>
                    <option value="500">500 pieces</option>
                    <option value="1000">1000 pieces</option>
                    <option value="1500">1500 pieces</option>
                </select>
            </div>
            <div class="control-group">
                <label for="imageSelect">Image:</label>
                <select id="imageSelect">
                    <option value="images/DisneyHoliday.jpg">Disney Holiday</option>
                </select>
            </div>
            <button id="startBtn">Start New Puzzle</button>
            <button id="resetViewBtn">Reset View</button>
            <button id="lassoBtn">Lasso</button>
            <button id="referenceBtn" title="Toggle reference image">Reference</button>
            <button id="settingsBtn">Settings</button>
            <div id="stats">
                <span id="progressText">0% Complete</span>
                <span id="version" style="color: #999; font-size: 12px;">v2.0.2</span>
            </div>
        </div>

        <div id="canvasContainer">
            <canvas id="puzzleCanvas"></canvas>
        </div>

        <div id="instructions">
            <h3>Controls:</h3>
            <p><strong>Touch:</strong> Tap = Pan | Hold & Drag = Move Piece | Edge = Auto-pan | Pinch = Zoom</p>
            <p><strong>Mouse:</strong> Click & Drag = Pan | Alt+Drag = Move Piece | Shift+Drag = Selection Box</p>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button id="closeSettingsBtn" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- User Settings -->
                <section class="settings-section">
                    <h3>Your Profile</h3>
                    <div class="form-group">
                        <label for="userNameInput">Display Name:</label>
                        <input type="text" id="userNameInput" maxlength="20" placeholder="Player" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label for="userColorInput">Your Color:</label>
                        <input type="color" id="userColorInput" value="#667eea">
                    </div>
                    <div class="form-group">
                        <label for="canvasColorInput">Canvas Color:</label>
                        <input type="color" id="canvasColorInput" value="#f0f0f0">
                    </div>
                    <button id="saveSettingsBtn" class="btn-primary">Save Settings</button>
                </section>

                <!-- Puzzle Management -->
                <section class="settings-section">
                    <h3>Puzzle Management</h3>
                    <button id="showBackupsBtn" class="btn-secondary">View Backups</button>
                    <button id="resetPuzzleBtn" class="btn-danger">Reset Puzzle</button>
                    <p class="settings-note">Backups are created automatically every 3 minutes when active.</p>
                </section>
            </div>
        </div>
    </div>

    <!-- Backup Browser Modal -->
    <div id="backupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Puzzle Backups</h2>
                <button id="closeBackupModalBtn" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="backupList">
                    <p>Loading backups...</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="js/PuzzleAPI.js"></script>
    <script src="js/PuzzleCutter.js"></script>
    <script src="js/PuzzleEngine.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
